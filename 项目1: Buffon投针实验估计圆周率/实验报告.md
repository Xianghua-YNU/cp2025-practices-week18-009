
# 实验报告：Buffon 投针实验估计 $\pi$ 值

**学生姓名：** [杨万超] 

**学号：** [20231050093] 

**完成日期：** [2025.6.25]

## 一、实验目的
编写程序，利用 Buffon 投针实验来估计 $\pi$ 的值，并分析实验次数对估计精度的影响。

## 二、实验原理
简要描述 Buffon 投针实验的原理，包括投针概率与 $\pi$ 的关系公式。
Buffon投针实验是几何概率的经典问题。在间距为d的平行线上投掷长度为l（l ≤ d）的针，针与任一平行线相交的概率p与π有关：
p = (2l)/(πd)

通过大量实验得到相交频率f≈p后，可估计：
π ≈ (2l)/(f*d)

## 三、实验环境
### 3.1 硬件环境
- 计算机型号：[小新Pro 14 2022]
- CPU：[12th Gen Intel(R) Core(TM) i9-12900H   2.50 GHz]
- 内存：[16GB]

### 3.2 软件环境
- 操作系统：[Windows 11 Version 24H2 ]
- 编程语言：[Python 3.9.12]
- 开发工具：[Jupyter Notebook]

## 四、实验步骤
### 4.1 投针实验模拟逻辑实现
详细描述实现投针实验模拟逻辑的步骤，可附上关键代码片段。
```python
import random
import math
import matplotlib.pyplot as plt

def buffon_needle(num_needles, needle_len=1, line_spacing=2):
    crossings = 0
    for _ in range(num_needles):
        # 随机生成针的位置和角度
        y = random.uniform(0, line_spacing/2)
        theta = random.uniform(0, math.pi/2)
        
        # 判断是否相交
        if y <= (needle_len/2)*math.sin(theta):
            crossings += 1
    
    if crossings == 0:
        return 0  # 避免除零错误
    
    prob = crossings/num_needles
    return (2*needle_len)/(prob*line_spacing)
```

### 4.2 实验次数设置
设置实验次数为：100, 1000, 5000,10000,50000, 100000, 500000,1000000次

### 4.3 运行实验并记录结果
记录每次实验得到的 $\pi$ 估计值。

## 五、实验结果
### 5.1 不同实验次数下的 $\pi$ 估计值
| 实验次数 | $\pi$ 估计值 |
|----------|---------------|
| 100      | [2.857143]  |
| 1000     | [3.257329]  |
| 5000     | [3.221649]  |
| 10000    | [3.111388]  |
| 50000    | [3.135779]  |
| 100000   | [3.156566]  |
| 500000   | [3.140605]  |
| 1000000  | [3.142401]  |

### 5.2 实验结果可视化
附上不同实验次数与 $\pi$ 估计值的关系图表，可使用折线图或柱状图。
![image](https://github.com/user-attachments/assets/6cd3f13a-3585-4ee5-9b7d-36bd88d120ac)


## 六、结果分析
### 6.1 实验次数对估计精度的影响
从实验结果可以观察到以下规律：

总体趋势：

随着实验次数从100增加到1,000,000，π估计值逐渐收敛到真实值（3.141593）

绝对误差从最大的0.284（100次实验）减小到最小的0.0008（1,000,000次实验）

收敛特性：

小样本时（<10,000次）估计值波动较大，如100次实验时估计值2.857，1000次时3.257

中等样本（50,000次）时估计值3.1358，误差已降至0.0058

大样本（>500,000次）时估计值稳定在3.1406-3.1424之间

异常现象：

100,000次实验时误差(0.0149)比50,000次时(0.0058)稍大

这体现了概率方法的随机波动特性，即使在大样本时也可能出现暂时性偏离

### 6.2 误差来源分析
讨论实验中可能存在的误差来源，如随机数生成的质量、模拟逻辑的近似等。
系统误差：

随机数生成器的周期性（伪随机性）

浮点数运算精度限制（Python使用IEEE 754双精度）

针长与线距比值（本实验采用标准值l=1,d=2）

实现误差：

角度采样范围（0到π/2）的边界处理

相交判断的浮点比较精度

循环累加的数值稳定性

## 七、实验结论
总结实验结果，说明 Buffon 投针实验是否能够有效估计 $\pi$ 的值，以及实验次数对估计精度的影响是否符合预期。
方法有效性：

Buffon投针实验确实能够估计π值

百万次实验可获得3位小数精度（误差约0.0008）

验证了几何概率理论的正确性

效率评估：

收敛速度较慢（O(1/√n)）

相比现代数值方法（如蒙特卡洛积分）效率较低

每提高1位精度需要约100倍更多实验

与理论预期对比：

实验结果基本符合√n收敛的统计规律

大样本时的微小波动在预期范围内

验证了Buffon原始公式的正确性
